# Project Milestones: Agent Board v2

This document tracks the development progress and key milestones for the Agent Board v2 project.

## Milestone 1: Initial Setup & Core Crew Functionality (Completed ✅)

This milestone established the foundational elements of the project.

**Key Achievements:**
*   **Environment Setup:** Configured Python 3.12 virtual environment (`venv`).
*   **Project Scaffolding:** Generated base structure using `crewai create crew agent_board_v2`.
*   **Agent Configuration:** Defined roles (Chief Internist, Primary Diagnostician, Diagnostic Reviewer) and backstories in `src/agent_board_v2/config/`.
*   **Task Configuration:** Created the primary `medical_case_analysis` task in `src/agent_board_v2/config/tasks.yaml`.
*   **Hierarchical Process:** Implemented CrewAI's hierarchical process with the Chief Internist as manager (`src/agent_board_v2/crew.py`).
*   **Team Configurations:** Created YAML files (`agents_team1.yaml` to `agents_team4.yaml`) defining different team dynamics.
*   **Basic Execution Script:** Developed `run_team.py` to easily run different teams, cases, stages, and models, including output file naming.
*   **Initial Documentation:** Created `README.md` and included `crewai_documentation.md`.

## Milestone 2: Output Analysis Implementation (Completed ✅)

This milestone focused on adding capabilities to analyze the results generated by the crew runs.

**Key Achievements:**
*   **Raw Output Aggregation:** Created `src/agent_board_v2/output_to_csv.py` to gather individual markdown outputs (`output/result_team*.md`) and true diagnoses (`cases/case_list.csv`) into a summary file (`output/output_summary.csv`).
*   **LLM-based Analysis Script:** Developed `analyze_outputs_llm.py` which:
    *   Reads `output/output_summary.csv`.
    *   Uses OpenAI GPT-4o API calls.
    *   Checks if the final diagnosis in the report matches the true diagnosis.
    *   Checks if the true diagnosis was mentioned in the differential list.
    *   Saves results to `output/analysis_summary_llm.csv` with `LLM_Accuracy_Match` and `LLM_Differential_Inclusion` columns.
*   **Dependency Management:** Added `pandas`, `openai`, and `python-dotenv` to project requirements.
*   **Documentation Update:** Updated `README.md` with instructions for the analysis workflow.

## Milestone 3: Enhancements (Pending ⏳)

This milestone focuses on improving the system's capabilities and robustness.

**Planned Work:**
*   **Medical Knowledge Tools:** Define, implement, and integrate specific CrewAI tools to allow agents to query medical information (e.g., symptom checkers, literature search). Target directory: `src/agent_board_v2/tools/`.
*   **Medical Knowledge Base:** Create or integrate a structured knowledge source (e.g., using files in `knowledge/` or external APIs) for the tools to use.
*   **Case Input Refinement:** Modify the system (likely `main.py` or `crew.py`) to load case data more directly (e.g., via arguments or environment variables) instead of relying on `run_team.py` to modify source files.

---

## Supporting Information

### Important: Virtual Environment

**IMPORTANT**: This project uses a Python virtual environment that must be activated before running any scripts or commands.

1.  **Activate the virtual environment**:
    On macOS/Linux: `source venv/bin/activate`
    On Windows: `venv\Scripts\activate`
2.  **Verify activation**: Look for `(venv)` at the start of your command prompt.

### Team Configurations

Four team types are defined to study dynamics:
1.  **Team 1 (Collaborative):** `agents_team1.yaml`
2.  **Team 2 (Mixed):** `agents_team2.yaml` (One difficult member)
3.  **Team 3 (Difficult):** `agents_team3.yaml` (Two difficult members)
4.  **Team 4 (Baseline):** `agents_team4.yaml` (Neutral)

### Running Different Team Configurations

Use `run_team.py`:
```bash
python run_team.py TEAM_NUMBER [CASE_ID] [STAGE] [OPTIONS]
```
See `README.md` for detailed parameters and examples.

### Output Analysis Workflow

1.  Run crew experiments using `run_team.py`.
2.  Aggregate raw results: `python src/agent_board_v2/output_to_csv.py` (creates `output/output_summary.csv`)
3.  Analyze results using LLM: `python analyze_outputs_llm.py` (creates `output/analysis_summary_llm.csv`)

### Dependencies

- Python >=3.10, <3.13
- `uv` package manager
- `crewai[tools]`
- `pandas`
- `openai`
- `python-dotenv`

### Key Files

- `README.md`: Main project documentation.
- `project_milestone.md`: This file.
- `run_team.py`: Script to run experiments.
- `analyze_outputs_llm.py`: Script for LLM-based analysis.
- `output/`: Contains raw results (`result_*.md`), aggregated summary (`output_summary.csv`), and analyzed results (`analysis_summary_llm.csv`).
- `cases/`: Contains medical case files and the true diagnosis list (`case_list.csv`).
- `src/agent_board_v2/`: Core source code (config, tools, crew definition).
- `.env`: For API keys.
- `pyproject.toml`: Dependency list.